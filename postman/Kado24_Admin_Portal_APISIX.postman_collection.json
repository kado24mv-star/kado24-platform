{
	"info": {
		"name": "Kado24 - Admin Portal (APISIX)",
		"_postman_id": "c6e9c7a7-5f2a-4b6a-8e1c-6b1a0fdc9a11",
		"description": "Admin portal API collection routed through APISIX (http://localhost:9080). Login saves accessToken to environment for subsequent calls.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"variable": [
		{ "key": "baseUrl", "value": "http://localhost:9080" },
		{ "key": "adminEmail", "value": "admin2@kado24.com" },
		{ "key": "adminPassword", "value": "Admin@123456" },
		{ "key": "accessToken", "value": "" },
		{ "key": "merchantId", "value": "1" }
	],
	"item": [
		{
			"name": "Auth - Login",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"const json = pm.response.json();",
							"if (json && json.success && json.data && json.data.accessToken) {",
							"  pm.environment.set('accessToken', json.data.accessToken);",
							"}"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [ { "key": "Content-Type", "value": "application/json" } ],
				"url": {
					"raw": "{{baseUrl}}/api/v1/auth/login",
					"host": [ "{{baseUrl}}" ],
					"path": [ "api","v1","auth","login" ]
				},
				"body": {
					"mode": "raw",
					"raw": "{\n  \"identifier\": \"{{adminEmail}}\",\n  \"password\": \"{{adminPassword}}\"\n}"
				},
				"description": "Login and store accessToken into environment."
			},
			"response": []
		},
		{
			"name": "Admin - Dashboard",
			"request": {
				"method": "GET",
				"header": [
					{ "key": "Authorization", "value": "Bearer {{accessToken}}" }
				],
				"url": {
					"raw": "{{baseUrl}}/api/admin/dashboard",
					"host": [ "{{baseUrl}}" ],
					"path": [ "api","admin","dashboard" ]
				}
			},
			"response": []
		},
		{
			"name": "Admin - Users",
			"request": {
				"method": "GET",
				"header": [ { "key": "Authorization", "value": "Bearer {{accessToken}}" } ],
				"url": { "raw": "{{baseUrl}}/api/admin/users", "host": ["{{baseUrl}}"], "path": ["api","admin","users"] }
			},
			"response": []
		},
		{
			"name": "Admin - Statistics",
			"request": {
				"method": "GET",
				"header": [ { "key": "Authorization", "value": "Bearer {{accessToken}}" } ],
				"url": { "raw": "{{baseUrl}}/api/admin/statistics", "host": ["{{baseUrl}}"], "path": ["api","admin","statistics"] }
			},
			"response": []
		},
		{
			"name": "Admin - Merchants Pending",
			"request": {
				"method": "GET",
				"header": [ { "key": "Authorization", "value": "Bearer {{accessToken}}" } ],
				"url": { "raw": "{{baseUrl}}/api/admin/merchants/pending", "host": ["{{baseUrl}}"], "path": ["api","admin","merchants","pending"] }
			},
			"response": []
		},
		{
			"name": "Admin - Merchant Approve",
			"request": {
				"method": "POST",
				"header": [ { "key": "Authorization", "value": "Bearer {{accessToken}}" } ],
				"url": { "raw": "{{baseUrl}}/api/admin/merchants/{{merchantId}}/approve", "host": ["{{baseUrl}}"], "path": ["api","admin","merchants","{{merchantId}}","approve"] }
			},
			"response": []
		},
		{
			"name": "Admin - Merchant Reject",
			"request": {
				"method": "POST",
				"header": [ { "key": "Authorization", "value": "Bearer {{accessToken}}" } ],
				"url": { "raw": "{{baseUrl}}/api/admin/merchants/{{merchantId}}/reject?reason=Not%20ready", "host": ["{{baseUrl}}"], "path": ["api","admin","merchants","{{merchantId}}","reject"], "query": [ {"key":"reason","value":"Not ready"} ] }
			},
			"response": []
		},
		{
			"name": "Vouchers - List (Public GET via APISIX)",
			"request": {
				"method": "GET",
				"header": [],
				"url": { "raw": "{{baseUrl}}/api/v1/vouchers", "host": ["{{baseUrl}}"], "path": ["api","v1","vouchers"] }
			},
			"response": []
		},
		{
			"name": "Orders - List",
			"request": {
				"method": "GET",
				"header": [ { "key": "Authorization", "value": "Bearer {{accessToken}}" } ],
				"url": { "raw": "{{baseUrl}}/api/v1/orders", "host": ["{{baseUrl}}"], "path": ["api","v1","orders"] }
			},
			"response": []
		},
		{
			"name": "Payments - List",
			"request": {
				"method": "GET",
				"header": [ { "key": "Authorization", "value": "Bearer {{accessToken}}" } ],
				"url": { "raw": "{{baseUrl}}/api/v1/payments", "host": ["{{baseUrl}}"], "path": ["api","v1","payments"] }
			},
			"response": []
		},
		{
			"name": "Wallet - List",
			"request": {
				"method": "GET",
				"header": [ { "key": "Authorization", "value": "Bearer {{accessToken}}" } ],
				"url": { "raw": "{{baseUrl}}/api/v1/wallet", "host": ["{{baseUrl}}"], "path": ["api","v1","wallet"] }
			},
			"response": []
		},
		{
			"name": "Redemptions - List",
			"request": {
				"method": "GET",
				"header": [ { "key": "Authorization", "value": "Bearer {{accessToken}}" } ],
				"url": { "raw": "{{baseUrl}}/api/v1/redemptions", "host": ["{{baseUrl}}"], "path": ["api","v1","redemptions"] }
			},
			"response": []
		},
		{
			"name": "Notifications - List",
			"request": {
				"method": "GET",
				"header": [ { "key": "Authorization", "value": "Bearer {{accessToken}}" } ],
				"url": { "raw": "{{baseUrl}}/api/v1/notifications", "host": ["{{baseUrl}}"], "path": ["api","v1","notifications"] }
			},
			"response": []
		},
		{
			"name": "Payouts - Simulate (Admin)",
			"request": {
				"method": "POST",
				"header": [ { "key": "Authorization", "value": "Bearer {{accessToken}}" }, {"key":"Content-Type","value":"application/json"} ],
				"url": { "raw": "{{baseUrl}}/api/v1/payouts/simulate", "host": ["{{baseUrl}}"], "path": ["api","v1","payouts","simulate"] },
				"body": { "mode":"raw", "raw": "{\n  \"weekEnding\": \"2025-11-14\",\n  \"dryRun\": true\n}" }
			},
			"response": []
		}
	]
}


