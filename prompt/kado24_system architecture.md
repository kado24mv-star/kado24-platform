# Kado24 Cambodia - Full Stack Development Prompt for Cursor AI

## ğŸ¯ Project Overview
Kado24 Cambodia is a comprehensive digital voucher marketplace platform for the Cambodian market. Build a production-ready microservices architecture with Flutter mobile apps, Apache APISIX API Gateway, OAuth2 authentication, and Spring Boot backend services.

---

## ğŸ—ï¸ Complete Architecture Overview

### System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           PRESENTATION LAYER                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Flutter Consumer App  â”‚ Flutter Merchant Appâ”‚  Admin Web Portal                                â”‚
â”‚  (iOS/Android)         â”‚  (iOS/Android)      â”‚ Web Application with Spring Boot and Angular     â”‚
â”‚                        â”‚                     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚  â€¢ Browse Vouchers     â”‚  â€¢ QR Scanner       â”‚  â”‚ Angular Frontend    â”‚                         â”‚
â”‚  â€¢ Purchase & Pay      â”‚  â€¢ Voucher Mgmt     â”‚  â”‚ (SPA - Port 4200)   â”‚                         â”‚
â”‚  â€¢ Digital Wallet      â”‚  â€¢ Dashboard        â”‚  â”‚ â€¢ Dashboard         â”‚                         â”‚
â”‚  â€¢ QR Codes            â”‚  â€¢ Sales Reports    â”‚  â”‚ â€¢ Merchant Approval â”‚                         â”‚
â”‚  â€¢ Reviews             â”‚  â€¢ Payout Tracking  â”‚  â”‚ â€¢ Voucher Moderationâ”‚                         â”‚
â”‚                        â”‚                     â”‚  â”‚ â€¢ Analytics         â”‚                         â”‚
â”‚                        â”‚                     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“ â†‘ HTTPS/REST
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    API GATEWAY (Apache APISIX - Port 9080)                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Features:                                                            â”‚  â”‚
â”‚  â”‚  â€¢ Dynamic Routing & Load Balancing                                  â”‚  â”‚
â”‚  â”‚  â€¢ OAuth2 Authentication Plugin                                      â”‚  â”‚
â”‚  â”‚  â€¢ Rate Limiting (per route, per user)                               â”‚  â”‚
â”‚  â”‚  â€¢ Request/Response Transformation                                   â”‚  â”‚
â”‚  â”‚  â€¢ Circuit Breaker & Fault Injection                                 â”‚  â”‚
â”‚  â”‚  â€¢ Real-time Metrics (Prometheus)                                    â”‚  â”‚
â”‚  â”‚  â€¢ Service Discovery (etcd)                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                            â”‚
â”‚  Route Examples:                                                           â”‚
â”‚  â€¢ /oauth2/* â†’ auth-service:8081 (public)                                  â”‚
â”‚  â€¢ /api/v1/users/* â†’ user-service:8082 (OAuth2 protected)                  â”‚
â”‚  â€¢ /api/v1/vouchers/* â†’ voucher-service:8083 (mixed: public/protected)     â”‚
â”‚  â€¢ /api/v1/orders/* â†’ order-service:8084 (OAuth2 protected)                â”‚
â”‚  â€¢ /api/v1/payments/* â†’ payment-service:8085 (OAuth2 protected)            â”‚
â”‚  â€¢ /api/admin/* â†’ admin-portal-backend:8089 (OAuth2 + ADMIN role)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“ â†‘ Internal REST
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MICROSERVICES LAYER                                â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Auth Service      â”‚  â”‚ User Service      â”‚  â”‚ Voucher Service      â”‚    â”‚
â”‚  â”‚ (Port 8081)       â”‚  â”‚ (Port 8082)       â”‚  â”‚ (Port 8083)          â”‚    â”‚
â”‚  â”‚ â€¢ OAuth2 Server   â”‚  â”‚ â€¢ Profile Mgmt    â”‚  â”‚ â€¢ CRUD Operations    â”‚    â”‚
â”‚  â”‚ â€¢ Registration    â”‚  â”‚ â€¢ Avatar Upload   â”‚  â”‚ â€¢ Search & Filter    â”‚    â”‚
â”‚  â”‚ â€¢ Token Mgmt      â”‚  â”‚ â€¢ User Prefs      â”‚  â”‚ â€¢ Categories         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Order Service     â”‚  â”‚ Payment Service   â”‚  â”‚ Wallet Service       â”‚    â”‚
â”‚  â”‚ (Port 8084)       â”‚  â”‚ (Port 8085)       â”‚  â”‚ (Port 8086)          â”‚    â”‚
â”‚  â”‚ â€¢ Order Creation  â”‚  â”‚ â€¢ Payment Init    â”‚  â”‚ â€¢ QR Generation      â”‚    â”‚
â”‚  â”‚ â€¢ Commission Calc â”‚  â”‚ â€¢ Gateway Integ   â”‚  â”‚ â€¢ Voucher Mgmt       â”‚    â”‚
â”‚  â”‚ â€¢ Kafka Events    â”‚  â”‚ â€¢ Callbacks       â”‚  â”‚ â€¢ Gifting            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Redemption Svc    â”‚  â”‚ Merchant Service  â”‚  â”‚ Notification Svc     â”‚    â”‚
â”‚  â”‚ (Port 8087)       â”‚  â”‚ (Port 8088)       â”‚  â”‚ (Port 8091)          â”‚    â”‚
â”‚  â”‚ â€¢ QR Validation   â”‚  â”‚ â€¢ Merchant Mgmt   â”‚  â”‚ â€¢ Kafka Consumer     â”‚    â”‚
â”‚  â”‚ â€¢ PIN Verificationâ”‚  â”‚ â€¢ Verification    â”‚  â”‚ â€¢ Push/SMS/Email     â”‚    â”‚
â”‚  â”‚ â€¢ Kafka Events    â”‚  â”‚ â€¢ Payout Calc     â”‚  â”‚ â€¢ Templates          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Payout Service    â”‚  â”‚ Analytics Service â”‚  â”‚ Admin Portal Backend â”‚    â”‚
â”‚  â”‚ (Port 8092)       â”‚  â”‚ (Port 8093)       â”‚  â”‚ (Port 8089)          â”‚    â”‚
â”‚  â”‚ â€¢ Weekly Payouts  â”‚  â”‚ â€¢ Reports         â”‚  â”‚ â€¢ Dashboard API      â”‚    â”‚
â”‚  â”‚ â€¢ Calculations    â”‚  â”‚ â€¢ Kafka Streams   â”‚  â”‚ â€¢ Merchant Approval  â”‚    â”‚
â”‚  â”‚ â€¢ Bank Transfer   â”‚  â”‚ â€¢ Aggregations    â”‚  â”‚ â€¢ Moderation         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Mock Services (Development/Testing Only - Port 8090-8099)           â”‚   â”‚
â”‚  â”‚ â€¢ mock-payment (ABA, Wing, Pi Pay, KHQR)                            â”‚   â”‚
â”‚  â”‚ â€¢ mock-notification (SMS, Email, Push)                              â”‚   â”‚
â”‚  â”‚ â€¢ mock-oauth (OAuth provider simulator)                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“ â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              DATA LAYER                                    â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ PostgreSQL 17 (Port 5432) - Primary Database                         â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚ â”‚ Core Tables  â”‚ OAuth2 Tablesâ”‚ Business Dataâ”‚ Audit Data      â”‚     â”‚  â”‚
â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚  â”‚
â”‚  â”‚ â”‚ â€¢ users      â”‚ â€¢ clients    â”‚ â€¢ vouchers   â”‚ â€¢ event_log     â”‚     â”‚  â”‚
â”‚  â”‚ â”‚ â€¢ merchants  â”‚ â€¢ tokens     â”‚ â€¢ orders     â”‚ â€¢ activity_log  â”‚     â”‚  â”‚
â”‚  â”‚ â”‚ â€¢ profiles   â”‚ â€¢ auth_codes â”‚ â€¢ redemptionsâ”‚                 â”‚     â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â”‚                                                                      â”‚  â”‚
â”‚  â”‚ Features:                                                            â”‚  â”‚
â”‚  â”‚ â€¢ JSONB columns for flexible data                                    â”‚  â”‚
â”‚  â”‚ â€¢ Full-text search (tsvector)                                        â”‚  â”‚
â”‚  â”‚ â€¢ Table partitioning (orders by month)                               â”‚  â”‚
â”‚  â”‚ â€¢ GIN/GIST indexes for performance                                   â”‚  â”‚
â”‚  â”‚ â€¢ Point type for geospatial queries                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Redis 7 (Port 6379) - Cache & Session Store                          â”‚  â”‚
â”‚  â”‚ â€¢ OAuth2 tokens (with TTL)                                           â”‚  â”‚
â”‚  â”‚ â€¢ Session data                                                       â”‚  â”‚
â”‚  â”‚ â€¢ API response cache                                                 â”‚  â”‚
â”‚  â”‚ â€¢ Rate limiting counters                                             â”‚  â”‚
â”‚  â”‚ â€¢ Background job queue                                               â”‚  â”‚
â”‚  â”‚ â€¢ OTP codes (with expiry)                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Apache Kafka (Port 9092) - Event Streaming                           â”‚  â”‚
â”‚  â”‚ Topics:                                                              â”‚  â”‚
â”‚  â”‚ â€¢ order-events (3 partitions) - Order lifecycle                      â”‚  â”‚
â”‚  â”‚ â€¢ payment-events (3 partitions) - Payment status updates             â”‚  â”‚
â”‚  â”‚ â€¢ notification-events (5 partitions) - Notifications to send         â”‚  â”‚
â”‚  â”‚ â€¢ redemption-events (3 partitions) - Voucher redemptions             â”‚  â”‚
â”‚  â”‚ â€¢ analytics-events (5 partitions) - Analytics data                   â”‚  â”‚
â”‚  â”‚ â€¢ audit-events (3 partitions) - Complete audit trail                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Local File Storage (/var/kado24/uploads)                             â”‚  â”‚
â”‚  â”‚ â€¢ User avatars                                                       â”‚  â”‚
â”‚  â”‚ â€¢ Voucher images                                                     â”‚  â”‚
â”‚  â”‚ â€¢ Merchant logos & banners                                           â”‚  â”‚
â”‚  â”‚ â€¢ Business documents (licenses, certificates)                        â”‚  â”‚
â”‚  â”‚ â€¢ Tracked in file_uploads table (PostgreSQL)                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“ â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EXTERNAL INTEGRATIONS (Mocked in Dev)                   â”‚
â”‚                                                                            â”‚
â”‚  Payment Gateways:              Communication:               Auth:         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â€¢ ABA Pay API  â”‚            â”‚ â€¢ Firebase FCM â”‚        â”‚ â€¢ Facebook   â”‚  â”‚
â”‚  â”‚ â€¢ Wing API     â”‚            â”‚ â€¢ SendGrid     â”‚        â”‚ â€¢ Google     â”‚  â”‚
â”‚  â”‚ â€¢ Pi Pay API   â”‚            â”‚ â€¢ SMS Gateway  â”‚        â”‚ â€¢ Apple ID   â”‚  â”‚
â”‚  â”‚ â€¢ KHQR API     â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”‚
â”‚                                                                            â”‚
â”‚  All external services have corresponding mock implementations for         â”‚
â”‚  development and testing (mock-payment, mock-notification, mock-oauth)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Technology Stack Summary

| Layer | Technology | Version | Purpose |
|-------|------------|---------|---------|
| **API Gateway** | Apache APISIX | 3.7+ | High-performance gateway with plugins |
| **Backend Framework** | Spring Boot | 3.2+ | Microservices development |
| **Language** | Java | 17+ | Backend services |
| **Authentication** | Spring Security OAuth2 | 3.2+ | Authorization server & resource servers |
| **Primary Database** | PostgreSQL | 17 | ACID transactions, JSONB, full-text search |
| **Cache/Session** | Redis | 7.x | Fast data access, session storage |
| **Message Broker** | Apache Kafka | 3.x | Event streaming, async processing |
| **Service Discovery** | etcd | 3.5+ | APISIX service registry |
| **Mobile Framework** | Flutter | 3.x | Cross-platform mobile apps |
| **Admin Frontend** | Angular | 17+ | Modern SPA for admin portal |
| **Admin Backend** | Spring Boot | 3.2+ | REST API for admin operations |
| **Containerization** | Docker | 24+ | Service deployment |
| **Orchestration** | Kubernetes | 1.28+ | Production deployment |
| **Monitoring** | Prometheus + Grafana | Latest | Metrics and dashboards |
| **Logging** | ELK Stack / Loki | Latest | Centralized logging |

Remark: using maven instead of gradle
---